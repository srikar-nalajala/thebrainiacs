(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{542:function(e,t,r){Promise.resolve().then(r.bind(r,2382)),Promise.resolve().then(r.t.bind(r,5091,23)),Promise.resolve().then(r.t.bind(r,2445,23))},2382:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return i},useAuth:function(){return a}});var s=r(3827),n=r(4090),o=r(135),u=r(7907);let l=(0,n.createContext)();function i(e){let{children:t}=e,[r,i]=(0,n.useState)(null),[a,c]=(0,n.useState)(!0),f=(0,u.useRouter)();(0,n.useEffect)(()=>{let e=localStorage.getItem("user_id");e?_(e):c(!1)},[]);let _=async e=>{try{let{data:t,error:r}=await o.O.from("users").select("*").eq("id",e).single();if(r)throw r;t&&i(t)}catch(e){console.error("Error fetching user:",e),"PGRST116"===e.code&&localStorage.removeItem("user_id")}finally{c(!1)}},d=async e=>{c(!0);try{let{data:t,error:r}=await o.O.from("users").select("*").eq("phone_number",e).single();if(!t)return c(!1),{success:!1,status:"USER_NOT_FOUND"};return i(t),localStorage.setItem("user_id",t.id),{success:!0,user:t}}catch(e){return console.error("Login Error:",e),{success:!1,error:e}}finally{c(!1)}},h=async e=>{c(!0);try{let{data:t,error:r}=await o.O.from("users").insert([e]).select().single();if(r)throw r;return i(t),localStorage.setItem("user_id",t.id),{success:!0,user:t}}catch(e){return console.error("Registration Error:",e),{success:!1,error:e}}finally{c(!1)}};return(0,s.jsx)(l.Provider,{value:{user:r,loading:a,loginWithPhone:d,registerUser:h,logout:()=>{i(null),localStorage.removeItem("user_id"),f.push("/login")}},children:t})}let a=()=>(0,n.useContext)(l)},135:function(e,t,r){"use strict";r.d(t,{O:function(){return u}});var s=r(7688);let n="https://zlpjahdoxdbjzpvxuosp.supabase.co",o="sb_publishable_dqwGMGOwDlbN79ObqqM8gg_mRKsxNcu";if(!n||!o)throw Error("Missing Supabase environment variables");let u=(0,s.eI)(n,o)},2445:function(){},5091:function(e){e.exports={style:{fontFamily:"'__Outfit_d5e3f6', '__Outfit_Fallback_d5e3f6'",fontStyle:"normal"},className:"__className_d5e3f6",variable:"__variable_d5e3f6"}}},function(e){e.O(0,[436,971,69,744],function(){return e(e.s=542)}),_N_E=e.O()}]);