(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240,931],{7336:function(e,s,r){Promise.resolve().then(r.bind(r,812)),Promise.resolve().then(r.t.bind(r,5250,23))},812:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return i}});var t=r(3827),a=r(8792),n=r(7907),l=r(2382);function i(){let{user:e,logout:s}=(0,l.useAuth)(),r=(0,n.useRouter)();return(0,t.jsx)("header",{className:"main-header",children:(0,t.jsxs)("div",{className:"container header-container",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:()=>r.back(),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 transition-colors",title:"Go Back",children:(0,t.jsx)("i",{className:"fa-solid fa-arrow-left"})}),(0,t.jsxs)(a.default,{href:"/",className:"logo",children:[(0,t.jsx)("i",{className:"fa-solid fa-brain"}),(0,t.jsxs)("div",{className:"logo-text",children:[(0,t.jsx)("span",{children:"The"}),(0,t.jsx)("strong",{children:"Brainiacs"})]})]})]}),(0,t.jsxs)("div",{className:"search-bar",children:[(0,t.jsx)("i",{className:"fa-solid fa-magnifying-glass"}),(0,t.jsx)("input",{type:"text",placeholder:"Search coupons, brands..."})]}),(0,t.jsxs)("div",{className:"nav-icons",children:[(0,t.jsx)(a.default,{href:e?"/dashboard":"/login",className:"icon-btn highlight",title:e?"Dashboard":"Login",children:(0,t.jsx)("i",{className:"fa-regular ".concat(e?"fa-id-badge":"fa-user")})}),(0,t.jsx)(a.default,{href:"/dashboard",className:"icon-btn",children:(0,t.jsx)("i",{className:"fa-solid fa-cart-shopping"})}),(0,t.jsx)(a.default,{href:"/dashboard",className:"icon-btn",children:(0,t.jsx)("i",{className:"fa-regular fa-bell"})}),e&&(0,t.jsx)("button",{onClick:s,className:"icon-btn text-red-500",title:"Logout",children:(0,t.jsx)("i",{className:"fa-solid fa-right-from-bracket"})})]})]})})}},2382:function(e,s,r){"use strict";r.r(s),r.d(s,{AuthProvider:function(){return c},useAuth:function(){return o}});var t=r(3827),a=r(4090),n=r(135),l=r(7907);let i=(0,a.createContext)();function c(e){let{children:s}=e,[r,c]=(0,a.useState)(null),[o,u]=(0,a.useState)(!0),d=(0,l.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("user_id");e?f(e):u(!1)},[]);let f=async e=>{try{let{data:s,error:r}=await n.O.from("users").select("*").eq("id",e).single();if(r)throw r;s&&c(s)}catch(e){console.error("Error fetching user:",e),localStorage.removeItem("user_id")}finally{u(!1)}},h=async e=>{u(!0);try{let{data:s,error:r}=await n.O.from("users").select("*").eq("phone_number",e).single();if(!s)return u(!1),{success:!1,status:"USER_NOT_FOUND"};return c(s),localStorage.setItem("user_id",s.id),{success:!0,user:s}}catch(e){return console.error("Login Error:",e),{success:!1,error:e}}finally{u(!1)}},g=async e=>{u(!0);try{let{data:s,error:r}=await n.O.from("users").insert([e]).select().single();if(r)throw r;return c(s),localStorage.setItem("user_id",s.id),{success:!0,user:s}}catch(e){return console.error("Registration Error:",e),{success:!1,error:e}}finally{u(!1)}};return(0,t.jsx)(i.Provider,{value:{user:r,loading:o,loginWithPhone:h,registerUser:g,logout:()=>{c(null),localStorage.removeItem("user_id"),d.push("/login")}},children:s})}let o=()=>(0,a.useContext)(i)},135:function(e,s,r){"use strict";r.d(s,{O:function(){return l}});var t=r(7688);let a="https://zlpjahdoxdbjzpvxuosp.supabase.co",n="sb_publishable_dqwGMGOwDlbN79ObqqM8gg_mRKsxNcu";if(!a||!n)throw Error("Missing Supabase environment variables");let l=(0,t.eI)(a,n)}},function(e){e.O(0,[436,792,971,69,744],function(){return e(e.s=7336)}),_N_E=e.O()}]);