(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{7442:function(e,s,t){Promise.resolve().then(t.bind(t,9441))},812:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var a=t(3827),r=t(8792),l=t(7907),d=t(2382);function n(){let{user:e,logout:s}=(0,d.useAuth)(),t=(0,l.useRouter)();return(0,a.jsx)("header",{className:"main-header",children:(0,a.jsxs)("div",{className:"container header-container",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>t.back(),className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 text-gray-600 transition-colors",title:"Go Back",children:(0,a.jsx)("i",{className:"fa-solid fa-arrow-left"})}),(0,a.jsxs)(r.default,{href:"/",className:"logo",children:[(0,a.jsx)("i",{className:"fa-solid fa-brain"}),(0,a.jsxs)("div",{className:"logo-text",children:[(0,a.jsx)("span",{children:"The"}),(0,a.jsx)("strong",{children:"Brainiacs"})]})]})]}),(0,a.jsxs)("div",{className:"search-bar",children:[(0,a.jsx)("i",{className:"fa-solid fa-magnifying-glass"}),(0,a.jsx)("input",{type:"text",placeholder:"Search coupons, brands..."})]}),(0,a.jsxs)("div",{className:"nav-icons",children:[(0,a.jsx)(r.default,{href:e?"/dashboard":"/login",className:"icon-btn highlight",title:e?"Dashboard":"Login",children:(0,a.jsx)("i",{className:"fa-regular ".concat(e?"fa-id-badge":"fa-user")})}),(0,a.jsx)("a",{href:"#",className:"icon-btn",children:(0,a.jsx)("i",{className:"fa-solid fa-cart-shopping"})}),(0,a.jsx)("a",{href:"#",className:"icon-btn",children:(0,a.jsx)("i",{className:"fa-regular fa-bell"})}),e&&(0,a.jsx)("button",{onClick:s,className:"icon-btn text-red-500",title:"Logout",children:(0,a.jsx)("i",{className:"fa-solid fa-right-from-bracket"})})]})]})})}},9441:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var a=t(3827),r=t(4090);t(8792);var l=t(135),d=t(2382),n=t(812);function c(){let{user:e}=(0,d.useAuth)();return e?(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Your Information"}),(0,a.jsx)("button",{className:"text-[#E50914] font-semibold text-sm hover:underline",children:"Edit"})]}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:"Personal Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start border-b border-gray-50 pb-3",children:[(0,a.jsx)("span",{className:"text-gray-500 text-sm w-1/3",children:"Name:"}),(0,a.jsx)("span",{className:"text-gray-900 font-semibold w-2/3 text-right",children:e.name})]}),(0,a.jsxs)("div",{className:"flex justify-between items-start border-b border-gray-50 pb-3",children:[(0,a.jsx)("span",{className:"text-gray-500 text-sm w-1/3",children:"Email:"}),(0,a.jsx)("span",{className:"text-gray-900 font-semibold w-2/3 text-right break-all",children:e.email})]}),(0,a.jsxs)("div",{className:"flex justify-between items-start border-b border-gray-50 pb-3",children:[(0,a.jsx)("span",{className:"text-gray-500 text-sm w-1/3",children:"Date of Birth:"}),(0,a.jsx)("span",{className:"text-gray-900 font-semibold w-2/3 text-right",children:e.dob})]}),(0,a.jsxs)("div",{className:"flex justify-between items-start pb-1",children:[(0,a.jsx)("span",{className:"text-gray-500 text-sm w-1/3",children:"UPI ID:"}),(0,a.jsx)("span",{className:"text-gray-900 font-semibold w-2/3 text-right",children:e.upi_id})]})]})]}),(0,a.jsxs)("div",{className:"pt-2",children:[(0,a.jsx)("h4",{className:"text-lg font-bold text-gray-800 mb-4",children:"Account Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-50 pb-3",children:[(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"ID:"}),(0,a.jsx)("span",{className:"text-gray-900 font-semibold text-xs",children:e.id})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-50 pb-3",children:[(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Role:"}),(0,a.jsx)("span",{className:"text-gray-900 font-semibold",children:e.role})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center border-b border-gray-50 pb-3",children:[(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"User Level:"}),(0,a.jsx)("span",{className:"text-gray-900 font-semibold",children:e.user_level})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center pb-1",children:[(0,a.jsx)("span",{className:"text-gray-500 text-sm",children:"Joined:"}),(0,a.jsx)("span",{className:"text-gray-900 font-semibold",children:new Date(e.created_at).toLocaleDateString()})]})]})]})]})]}):(0,a.jsx)("div",{className:"p-6 bg-white rounded-2xl",children:"Loading..."})}function i(e){let{stats:s}=e,t=(null==s?void 0:s.sold)||0,r=1,l="Spark",d="Blaze",n=0,c=30,i=7,o=0;t>=30&&t<100?(r=2,l="Blaze",d="Inferno",n=30,c=100,i=15,o=2):t>=100&&(r=3,l="Inferno",d="Max Level",n=100,c=100,i=30,o=5);let x=0;return x=r<3?(t-n)/(c-n)*100:100,(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100 text-center",children:(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"User Level"})}),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-[#b91c1c] mb-1",children:["Level ",r," - ",l]}),(0,a.jsxs)("div",{className:"flex justify-around mt-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:i}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Upload Limit/day"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[o,"%"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Buyer Discount"})]})]})]}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsx)("h4",{className:"font-bold text-gray-800 mb-4",children:"Level Progress"}),(0,a.jsxs)("div",{className:"text-center mb-2",children:[(0,a.jsxs)("span",{className:"text-3xl font-bold text-[#b91c1c]",children:[t," / ",r<3?c:"âˆž"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"coupons sold"})]}),(0,a.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-3 mb-4 overflow-hidden",children:(0,a.jsx)("div",{className:"bg-[#E50914] h-3 rounded-full",style:{width:"".concat(x,"%")}})}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:[Math.round(x),"% Complete"]}),r<3?(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[c-t," more sales needed for ",(0,a.jsx)("span",{className:"font-bold text-[#b91c1c]",children:d})]}):(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2 text-green-600 font-bold",children:"Maximum Level Reached!"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 italic mt-1",children:"Level up by selling coupons"})]})]})]})]})}function o(){let{user:e}=(0,d.useAuth)(),[s,t]=(0,r.useState)({uploaded:0,sold:0,purchased:0});(0,r.useEffect)(()=>{e&&n()},[e]);let n=async()=>{let{count:s}=await l.O.from("coupons").select("*",{count:"exact",head:!0}).eq("seller_id",e.id),{count:a}=await l.O.from("coupons").select("*",{count:"exact",head:!0}).eq("seller_id",e.id).eq("status","sold"),{count:r}=await l.O.from("coupons").select("*",{count:"exact",head:!0}).eq("buyer_id",e.id);t({uploaded:s||0,sold:a||0,purchased:r||0})};return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-6 border-b border-gray-100",children:(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Coupon Statistics"})}),(0,a.jsxs)("div",{className:"p-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-center divide-x divide-gray-100",children:[(0,a.jsxs)("div",{className:"flex-1 px-4",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:s.uploaded}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Total Uploaded"})]}),(0,a.jsxs)("div",{className:"flex-1 px-4",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:s.uploaded}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Approved"})]}),(0,a.jsxs)("div",{className:"flex-1 px-4",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:"0"}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Pending Review"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center text-center divide-x divide-gray-100 mt-8 pt-8 border-t border-gray-50",children:[(0,a.jsxs)("div",{className:"flex-1 px-4",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:s.sold}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Sold"})]}),(0,a.jsxs)("div",{className:"flex-1 px-4",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:s.purchased}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Purchased"})]}),(0,a.jsxs)("div",{className:"flex-1 px-4",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-gray-900",children:s.sold+s.purchased}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"Total Verified"})]})]})]})]})}function x(e){let{type:s}=e,{user:t}=(0,d.useAuth)(),[n,c]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{t&&x()},[t,s]);let x=async()=>{o(!0);let e=l.O.from("coupons").select("*");"uploads"===s?e=e.eq("seller_id",t.id):"purchases"===s&&(e=e.eq("buyer_id",t.id));let{data:a,error:r}=await e;a&&c(a),o(!1)};return i?(0,a.jsx)("div",{children:"Loading coupons..."}):"purchases"===s&&0===n.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"No Purchased Coupons"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"You haven't purchased any coupons yet. Browse through available coupons and start saving money!"}),(0,a.jsx)("a",{href:"/marketplace",className:"inline-block px-8 py-3 bg-[#E50914] text-white font-bold rounded-lg shadow-lg shadow-red-200 hover:bg-red-700 transition-colors",children:"Browse Available Coupons"})]}):0===n.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"No Uploaded Coupons"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"You haven't uploaded any coupons yet. Upload now to earn cash!"})]}):(0,a.jsx)("div",{className:"space-y-6",children:n.map(e=>(0,a.jsxs)("div",{className:"border border-gray-100 rounded-xl p-6 bg-white hover:shadow-md transition-shadow",children:[(0,a.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("span",{className:"text-gray-900 font-bold",children:e.brand_name}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium text-white ".concat("sold"===e.status?"bg-green-500":"bg-yellow-500"),children:e.status||"Active"})]})})}),(0,a.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Category:"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:e.category})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500 w-1/3",children:"Description:"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900 w-2/3 text-right",children:e.description})]}),(0,a.jsxs)("div",{className:"flex justify-between pt-2 border-t border-gray-50",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Expiry Date:"}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:e.expiry_date})]}),"purchases"===s&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Coupon Code:"}),(0,a.jsx)("div",{className:"bg-gray-50 p-2 rounded border border-dashed border-gray-300 text-center",children:(0,a.jsx)("span",{className:"font-mono font-bold text-lg text-[#E50914] select-all",children:e.code})})]})]})]},e.id))})}function m(){let[e,s]=(0,r.useState)("uploads"),[t,m]=(0,r.useState)({uploaded:0,sold:0,purchased:0}),{user:h}=(0,d.useAuth)();return(0,r.useEffect)(()=>{h&&e();async function e(){let{count:e}=await l.O.from("coupons").select("*",{count:"exact",head:!0}).eq("seller_id",h.id),{count:s}=await l.O.from("coupons").select("*",{count:"exact",head:!0}).eq("seller_id",h.id).eq("status","sold"),{count:t}=await l.O.from("coupons").select("*",{count:"exact",head:!0}).eq("buyer_id",h.id).eq("status","sold");m({uploaded:e||0,sold:s||0,purchased:t||0})}},[h]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.default,{}),(0,a.jsx)("main",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,a.jsxs)("div",{className:"w-full lg:w-1/3 space-y-8",children:[(0,a.jsx)(c,{}),(0,a.jsx)(i,{stats:t})]}),(0,a.jsxs)("div",{className:"w-full lg:w-2/3 space-y-8",children:[(0,a.jsx)(o,{}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex border-b border-gray-100",children:[(0,a.jsx)("button",{className:"flex-1 py-4 text-center font-semibold transition-colors ".concat("uploads"===e?"text-[#E50914] border-b-2 border-[#E50914] bg-red-50/50":"text-gray-500 hover:bg-gray-50"),onClick:()=>s("uploads"),children:"Uploaded Coupons"}),(0,a.jsx)("button",{className:"flex-1 py-4 text-center font-semibold transition-colors ".concat("purchases"===e?"text-[#E50914] border-b-2 border-[#E50914] bg-red-50/50":"text-gray-500 hover:bg-gray-50"),onClick:()=>s("purchases"),children:"Purchased Coupons"})]}),(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(x,{type:e})})]})]})]})})}),(0,a.jsx)("footer",{className:"main-footer",children:(0,a.jsxs)("div",{className:"container footer-container",children:[(0,a.jsxs)("div",{className:"footer-left",children:[(0,a.jsx)("h4",{children:"The Brainiacs - Coupon Marketplace"}),(0,a.jsx)("p",{children:"Save money on your favorite brands"}),(0,a.jsx)("p",{className:"phone",children:"\xa9 2026 The Brainiacs. All rights reserved."})]}),(0,a.jsxs)("div",{className:"footer-right",children:[(0,a.jsx)("a",{href:"#",children:"Terms"}),(0,a.jsx)("a",{href:"#",children:"Privacy"}),(0,a.jsx)("a",{href:"#",children:"Contact Us"})]})]})})]})}},2382:function(e,s,t){"use strict";t.r(s),t.d(s,{AuthProvider:function(){return c},useAuth:function(){return i}});var a=t(3827),r=t(4090),l=t(135),d=t(7907);let n=(0,r.createContext)();function c(e){let{children:s}=e,[t,c]=(0,r.useState)(null),[i,o]=(0,r.useState)(!0),x=(0,d.useRouter)();(0,r.useEffect)(()=>{let e=localStorage.getItem("user_id");e?m(e):o(!1)},[]);let m=async e=>{try{let{data:s,error:t}=await l.O.from("users").select("*").eq("id",e).single();if(t)throw t;s&&c(s)}catch(e){console.error("Error fetching user:",e),localStorage.removeItem("user_id")}finally{o(!1)}},h=async e=>{o(!0);try{let{data:s,error:t}=await l.O.from("users").select("*").eq("phone_number",e).single();if(!s)return o(!1),{success:!1,status:"USER_NOT_FOUND"};return c(s),localStorage.setItem("user_id",s.id),{success:!0,user:s}}catch(e){return console.error("Login Error:",e),{success:!1,error:e}}finally{o(!1)}},u=async e=>{o(!0);try{let{data:s,error:t}=await l.O.from("users").insert([e]).select().single();if(t)throw t;return c(s),localStorage.setItem("user_id",s.id),{success:!0,user:s}}catch(e){return console.error("Registration Error:",e),{success:!1,error:e}}finally{o(!1)}};return(0,a.jsx)(n.Provider,{value:{user:t,loading:i,loginWithPhone:h,registerUser:u,logout:()=>{c(null),localStorage.removeItem("user_id"),x.push("/login")}},children:s})}let i=()=>(0,r.useContext)(n)},135:function(e,s,t){"use strict";t.d(s,{O:function(){return d}});var a=t(7688);let r="https://zlpjahdoxdbjzpvxuosp.supabase.co",l="sb_publishable_dqwGMGOwDlbN79ObqqM8gg_mRKsxNcu";if(!r||!l)throw Error("Missing Supabase environment variables");let d=(0,a.eI)(r,l)}},function(e){e.O(0,[436,792,971,69,744],function(){return e(e.s=7442)}),_N_E=e.O()}]);